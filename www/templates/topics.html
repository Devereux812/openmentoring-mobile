<ion-view view-title="Wekuume">
  <ion-header-bar align-title="center" class="bar bar-stable">
    <div class="buttons">
      <a class="button button-icon icon ion-ios-search" ng-click="showFilterBar()" href="javascript:void(0);"></a>
    </div>
    <h1 class="title">Wekuume</h1>
    <div class="buttons">
      <a class="button button-icon icon ion-ios-list-outline"></a>
    </div>
  </ion-header-bar>

  <ion-content class="topic-list">
    <ion-refresher
      pulling-text="Pull to refresh..."
      on-refresh="refreshTopics()">
    </ion-refresher>

    <div class="card topic-card list" ng-repeat="topic in topics" ng-show="topic.isVisible">
      <ion-item class="item-stable item-icon-right" ng-class="{'item-icon-left':!topic.isDownloaded}">
        <a class="button button-icon icon ion-android-download" ng-show="(!topic.isDownloaded)" ng-click="downloadTopic(topic)"></a>
        {{topic.title}}
        <a class="button segment-button-right button-icon icon" ng-class="{'ion-arrow-down-b': !topic.showUnits, 'ion-arrow-up-b': topic.showUnits }" ng-click="toggleUnits(topic)"></a>
      </ion-item>
      <a class="item item-divider item-alert" ng-click="downloadTopic(topic)" ng-show="(!topic.isLatest && topic.isDownloaded)"><i class="icon ion-refresh"></i> An update is available!</a>
      <ion-item class="item item-icon-right" ng-class="{'item-looks-disabled':!topic.isDownloaded}" ng-repeat="unit in topic.units" ng-click="(topic.isDownloaded ? openUnit(unit.slug) : downloadTopic(topic))" ng-show="(topic.showUnits || unit.isVisible)">
        <i class="icon unit-icon" ng-class="{'ion-android-download':!topic.isDownloaded,'ion-chevron-right':topic.isDownloaded}"></i>
        {{unit.title}}
      </ion-item>
    </div>

  </ion-content>
</ion-view>
